<!DOCTYPE html><meta charset="utf-8"><title>JavaScriptでMac OSXのDockのように拡大縮小するアイコン | egashira.jp</title><meta name="description" content="題名のとおりなんですけど、マウスホバーでアイコンが拡大表示される、Mac OSXのDockのような動きをするメニューをJavaScriptで書きました。"><meta property="og:title" content="JavaScriptでMac OSXのDockのように拡大縮小するアイコン | egashira.jp"><meta property="og:description" content="題名のとおりなんですけど、マウスホバーでアイコンが拡大表示される、Mac OSXのDockのような動きをするメニューをJavaScriptで書きました。"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><link rel="stylesheet" href="/style.css"><link rel="alternate" type="application/atom+xml" href="https://egashira.jp/atom.xml" title="Atom"><div id="wrap"><header><a href="/"><svg width="240" height="50" viewBox="0 0 480 100"><path fill="none" stroke="#fff" stroke-width="9" stroke-linecap="square" stroke-linejoin="bevel" d="M237 61v1h26V49h-26V36h26v1M437 76V36h26v26h-26M367 36h26v26h-26V48h26M423 24v1M117 49h26V36h-26v26h26M183 62h-26V36h26v39h-21M197 36h26v26h-26V48h26M278 24v38M287 36h18v26M319 24v1M319 36v26M334 62V36h19M409 61v1M423 36v38h-15"/><path fill="#fff" d="M5.4 38.2c-1.8 2-2.4 5-2.5 8L0 85c-.2 7 8 15 15 15l39-2.8c2.8 0 5.8-.5 7.7-2.4l36.5-36.6c3-3 2.2-8.5-1.7-12.4L54.2 3.5c-4-4-9.4-4.7-12.4-1.7L5.4 38.2zm46.8 48.5l-20.2 1L12.4 68l1-20L40 21c1.5-1.4 4.2-1 6.2 1 2 1.8 2.3 4.6 1 6L22.4 53c-2 1.8-1.4 5.2 1 7.7 2.5 2.4 6 3 7.8 1L56 37c1.3-1.4 4-1 6 1s2.4 4.7 1 6L38.2 69c-1.8 1.8-1.3 5.3 1 7.7 2.5 2.4 6 3 7.8 1L71.8 53c1.5-1.5 4.3-1 6.2.8 2 2 2.3 4.7.8 6.2L52.2 86.6z"/></svg></a></header><article><h1>JavaScriptでMac OSXのDockのように拡大縮小するアイコン</h1><p class="updated">2019-03-25</p><p class="abst">題名のとおりなんですけど、マウスホバーでアイコンが拡大表示される、Mac OSXのDockのような動きをするメニューをJavaScriptで書きました。<br>例によってライブラリとかjQueryを使用していないので、掲載しているコードだけで動きます。<br>2016/6/13追記：スムーズさを出すためにフレームレートを変更したのと若干のコード変更を行いました。<br>2019/3/25追記：SVGアイコンをutf-8の生コードからbase64エンコードデータに変更しました。</p><p>このDockメニューはActionScript(Flash)でやってから何度も書いているのですが、HTML5やCSS3、SVGのおかげでだいぶ簡単に実現することができるようになりました。</p><h2>デモ</h2><p>下のSNS系のアイコンの上にマウスを乗っけてみてください。ちゃんとそれっぽく動くでしょう？！</p><p>Mac OSXが出てから15年以上にわたって変わらないGUIとして見た場合のDockは、やはり優れたGUIなんでしょうね。それをWebで実現したからといって使いどころは難しいですけど。。</p><p>DockのアイコンをSVGで描いていて、cssの::before擬似要素のcontent属性に設定しています。以前は、utf-8の生のSVGでcss内に記述しても問題ありませんでしたが、いつからか表示されなくなってましたので、修正してbase64エンコードしたSVGに変更しました。</p><div id="demo"><style>#demo{padding-top:200px;background:#fff}#sns{position:relative;margin:0 auto;display:flex}#sns li{flex:1 1 auto;list-style:none}#sns a{display:block;text-align:center}#sns a::before{display:block;margin:0 auto}.dock li{display:block;position:absolute;bottom:0;transform-origin:50% 100%}.dock li.hide{opacity:0}.dock a{display:block;width:30px;height:30px;padding:4px;margin:0 1px;border-radius:4px}.dock span{display:none}.dock li:hover span{position:absolute;display:block;margin:0 0 3px;bottom:100%;left:50%;transform:translateX(-50%);white-space:nowrap;text-align:center;font-size:10px;border-radius:1em;padding:.1em 1em;color:#fff;background:#666}.dock li:hover span::before{content:'';position:absolute;display:block;width:0;bottom:-3px;left:50%;margin-left:-4px;border-style:solid;border-color:#666 transparent;border-width:4px 4px 0}.facebook{background:#315096}.facebook::before{content:url("data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00xOCAzMmgtNlYxNkg4di01LjVsNC0uMDJWNy4yNEMxMiAyLjc0IDEzLjIgMCAxOC41IDBoNC40MnY1LjVoLTIuNzVDMTguMSA1LjUgMTggNi4zIDE4IDcuNzN2Mi43Nmg0Ljk1TDIyLjM4IDE2SDE4djE2eicvPjwvc3ZnPg==")}.twitter{background:#55acee}.twitter::before{content:url("data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00zMiA2LjA4Yy0xLjE4LjUyLTIuNDQuODctMy43NyAxLjAzIDEuMzUtLjggMi40LTIuMSAyLjktMy42Mi0xLjI4Ljc1LTIuNyAxLjMtNC4xOCAxLjYtMS4yLTEuMy0yLjktMi4wOC00LjgtMi4wOC0zLjYyIDAtNi41NiAyLjk0LTYuNTYgNi41NiAwIC41Mi4wNSAxLjAyLjE2IDEuNS01LjQ2LS4yNy0xMC4zLTIuOS0xMy41My02Ljg2LS41Ny45Ny0uOSAyLjEtLjkgMy4zIDAgMi4yOCAxLjE3IDQuMyAyLjkzIDUuNDctMS4wOC0uMDQtMi4xLS4zMy0yLjk3LS44My0uMDIuMDMtLjAyLjA2LS4wMi4xIDAgMy4xNyAyLjI3IDUuODIgNS4yNyA2LjQyLS41NS4xNS0xLjEzLjIzLTEuNzMuMjMtLjQyIDAtLjgzLS4wNS0xLjIzLS4xMi44MiAyLjYgMy4yNSA0LjUgNi4xMiA0LjU2LTIuMjUgMS43Ni01LjA4IDIuOC04LjE2IDIuOC0uNTMgMC0xLjA1LS4wMy0xLjU2LS4xQzIuOSAyNy45MyA2LjM1IDI5IDEwLjA2IDI5YzEyLjA4IDAgMTguNjgtMTAgMTguNjgtMTguNjggMC0uMjggMC0uNTYtLjAyLS44NSAxLjMtLjkyIDIuNC0yLjA4IDMuMjgtMy40eicvPjwvc3ZnPg==")}.hateb{background:#008fde}.hateb::before{content:url("data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAzMiAzMic+PHBhdGggZmlsbD0nI2ZmZicgZD0nTTIzLjg3IDI0LjM1YzAgMS43NCAxLjQgMy4xNSAzLjE1IDMuMTVzMy4xNi0xLjQgMy4xNi0zLjE1YzAtMS43NC0xLjQyLTMuMTYtMy4xNi0zLjE2cy0zLjE1IDEuNC0zLjE1IDMuMTV6bS4yOC0yMC42Mmg1Ljc1djE1LjdoLTUuNzV6TTE1LjQgMTQuM3MzLjk4LS4yNiAzLjk4LTUuMDJjMC01LjUtNC45OC01LjU0LTcuODItNS41NEgxLjgydjIzLjc4aDkuNjVjNy44NiAwIDkuMi00LjMgOS4yLTcuMDVzLTEuMzQtNS4zNC01LjI2LTYuMTh6TTcuODggOC4yaDIuNjdjLjUgMCAyLjY3LjIgMi42NyAyLjI4IDAgMi40NC0xLjg4IDIuMzYtMy4xMyAyLjM2SDcuODdWOC4yMnpNMTEgMjIuNDZINy45di01LjIyaDMuMnMzLjIuMzggMy4yIDIuNi0xLjggMi42Mi0zLjI3IDIuNjJ6Jy8+PC9zdmc+")}.pocket{background:#ee4056}.pocket::before{content:url("data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00yNy41IDMuMTdINC4zM2MtMS41OCAwLTIuODYgMS4yNy0yLjg2IDIuODV2OC40NWMwIDcuOTggNi40NyAxNC40NSAxNC40NSAxNC40NSA3LjkgMCAxNC4zMi02LjM0IDE0LjQ2LTE0LjJ2LTguN2MwLTEuNTgtMS4yNy0yLjg1LTIuODUtMi44NXpNMjQgMTRsLTYuNDcgNi40N2MtLjQyLjQ0LTEuMDIuNjItMS42LjU1LS41Ni4wNy0xLjE1LS4xLTEuNi0uNTVMNy44NSAxNGMtLjc1LS43NS0uNzUtMS45OCAwLTIuNzRzMS45OC0uNzUgMi43NCAwbDUuMzMgNS4zNCA1LjM1LTUuMzRjLjc1LS43NSAxLjk4LS43NSAyLjczIDBzLjc2IDIgMCAyLjc0eicvPjwvc3ZnPg==")}.feedly{background:#6cc655}.feedly::before{content:url("data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00zMC41NiAxNi42N2wtMTMuMy0xMy4zYy0uNy0uNy0xLjgyLS43LTIuNTIgMGwtMTMuMyAxMy4zYy0uNy43LS43IDEuODIgMCAyLjUybDkuOTYgOS45NWg5LjJsOS45Ni05Ljk2Yy43LS43LjctMS44MyAwLTIuNTN6bS0yMi4xMyAyLjhsLTEuNDgtMS41Yy0uMS0uMS0uMS0uMjYgMC0uMzdsOC43OC04Ljc4Yy4xLS4xLjI3LS4xLjM3IDBsMS45OCAxLjk4Yy4xLjEuMS4yNyAwIC4zN2wtOC4zIDguM0g4LjQ0em05LjczIDUuNWwtMS40OCAxLjQ3aC0xLjM2bC0xLjQ4LTEuNDhjLS4xLS4xLS4xLS4yNyAwLS4zN2wxLjk3LTJjLjEyLS4xLjI4LS4xLjQgMGwxLjk2IDJjLjEuMS4xLjI2IDAgLjM2ek0xOC4yIDE4bC00Ljk0IDQuOTJIMTEuOWwtMS41LTEuNDhjLS4xLS4xLS4xLS4yNyAwLS4zN2w1LjQ0LTUuNDJjLjEtLjEuMjctLjEuMzcgMGwyIDEuOThjLjEuMS4xLjI3IDAgLjM3eicvPjwvc3ZnPg==")}.googlep{background:#dd4b39}.googlep::before{content:url("data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00xNy40NyAySDkuMUM1LjM0IDIgMS44IDQuODQgMS44IDguMTRjMCAzLjM2IDIuNTcgNi4wOCA2LjQgNi4wOC4yNiAwIC41IDAgLjc3LS4wMi0uMjUuNDctLjQzIDEtLjQzIDEuNTYgMCAuOTQuNSAxLjcgMS4xNCAyLjMtLjQ4IDAtLjk0LjAzLTEuNDUuMDNDMy41OCAxOC4xIDAgMjEuMDQgMCAyNC4xYzAgMy4wMiAzLjkyIDQuOTIgOC41NyA0LjkyIDUuMyAwIDguMjMtMyA4LjIzLTYuMDQgMC0yLjQyLS43LTMuODctMi45My01LjQ0LS43NS0uNTMtMi4yLTEuODQtMi4yLTIuNiAwLS45LjI2LTEuMzQgMS42LTIuNCAxLjQtMS4wOCAyLjM3LTIuNiAyLjM3LTQuMzcgMC0yLjEtLjk0LTQuMTctMi43LTQuODVoMi42NkwxNy40NyAyem0tMi45MiAyMC40OGMuMDYuMjguMS41Ny4xLjg3IDAgMi40NC0xLjU4IDQuMzUtNi4xIDQuMzUtMy4yIDAtNS41My0yLjA0LTUuNTMtNC40OCAwLTIuNCAyLjg4LTQuNCA2LjEtNC4zNS43NCAwIDEuNDQuMTMgMi4wOC4zMyAxLjc0IDEuMiAzIDEuOSAzLjM1IDMuMjh6bS01LjE1LTkuMWMtMi4xNi0uMDgtNC4yLTIuNDMtNC41OC01LjI2czEuMDctNSAzLjIzLTQuOTNjMi4xNi4wNSA0LjIgMi4zMiA0LjU4IDUuMTZzLTEuMDcgNS4wNy0zLjIzIDV6TTI2IDhWMmgtMnY2aC02djJoNnY2aDJ2LTZoNlY4eicvPjwvc3ZnPg==")}.line{background:#00c300}.line::before{content:url("data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00xNS45MyAxLjk1Yy03Ljk2IDAtMTQuNCA1LjI4LTE0LjQgMTEuOCAwIDUuODQgNS4yIDEwLjcgMTIuMDIgMTEuNjNoLjA4bC4yMy4wNGMuNzUuMSAxLjEuMjggMS4xIDEuMS0uMDIuOTItLjM4IDEuNi0uNiAyLjA0cy0uNjcgMi4yNSAxLjQgMS4xM2MxLjU4LS44OCA5LjM3LTQuNyAxMi44Ny0xMC4zNy45My0xLjQgMS41LTMgMS42Ny00LjY4di0uMTVsLjAzLS4yNXYtLjVjMC02LjUyLTYuNDQtMTEuOC0xNC40LTExLjh6TTkuOSAxNy4xNUg3LjEzYy0uNCAwLS43My0uMzMtLjczLS43M3YtNS41N2MwLS40LjMzLS43NC43NC0uNzRzLjczLjM0LjczLjc1djQuODNoMmMuNDIgMCAuNzUuMzMuNzUuNzNzLS4zMy43NS0uNzQuNzV6bTMuMTItLjczYzAgLjQtLjMzLjczLS43NC43M3MtLjczLS4zMy0uNzMtLjczdi01LjU3YzAtLjQuMzMtLjc0LjczLS43NHMuNzQuMzQuNzQuNzV2NS41NnptNi43LjVjMCAuMDItLjAyLjAzLS4wMy4wNGwtLjEuMDZjMCAuMDItLjAzLjAzLS4wNi4wNGwtLjA2LjAzYy0uMDIgMC0uMDUgMC0uMDguMDJoLS4wNWwtLjE1LjAzYy0uMDUgMC0uMSAwLS4xNC0uMDItLjAyIDAtLjA1IDAtLjA3LS4wMnMtLjA2IDAtLjA4IDBsLS4wNy0uMDVjLS4wMiAwLS4wNCAwLS4wNS0uMDItLjEtLjA3LS4xNy0uMTUtLjIzLS4yNEwxNS43MiAxM3YzLjRjMCAuNC0uMzMuNzMtLjczLjczcy0uNzQtLjMzLS43NC0uNzR2LTUuNTUtLjA0LS4xYy4wMi0uMDIuMDMtLjA1LjAzLS4wN3YtLjA2bC4wNi0uMXMwLS4wMi4wMi0uMDNjLjA1LS4wOC4xMi0uMTUuMi0uMi4wMiAwIC4wMy0uMDIuMDUtLjAzbC4wOC0uMDMuMDgtLjAyLjA3LS4wMi4xMy0uMDJIMTVjLjA1IDAgLjEuMDIuMTQuMDMuMDIgMCAuMDQgMCAuMDYuMDIuMDIgMCAuMDUgMCAuMDcuMDIuMDMgMCAuMDUuMDIuMDcuMDRsLjA2LjA0Yy4wNC4wMi4wOC4wNS4xLjEuMDUuMDMuMS4wOC4xMi4xM2wyLjg1IDMuNzd2LTMuNGMwLS40LjMzLS43My43My0uNzNzLjc0LjM0Ljc0Ljc1djUuNTZjMCAuMDYgMCAuMS0uMDIuMTZ2LjA1bC0uMDQuMWMwIC4wMi0uMDIuMDMtLjAzLjA1IDAgLjAzLS4wMi4wNS0uMDQuMDcgMCAuMDMtLjAzLjA2LS4wNS4wOGwtLjAzLjAzem00LjgyLTQuMDJjLjQgMCAuNzMuMzMuNzMuNzNzLS4zMy43My0uNzMuNzNoLTJ2MS4zMmgyYy40IDAgLjczLjMzLjczLjczcy0uMzMuNzUtLjczLjc1SDIxLjhjLS40MiAwLS43NC0uMzMtLjc0LS43NHYtNS41NWMwLS40LjMzLS43NC43My0uNzRoMi43NGMuNCAwIC43My4zNC43My43NXMtLjMzLjczLS43My43M2gtMnYxLjNoMnonLz48L3N2Zz4=")}.github{background:#333}.github::before{content:url("data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00xNiAwQzcuMTYgMCAwIDcuMTYgMCAxNnM3LjE2IDE2IDE2IDE2IDE2LTcuMTYgMTYtMTZTMjQuODQgMCAxNiAwem05LjUgMjUuNWMtMS4yMyAxLjI0LTIuNjcgMi4yLTQuMjcgMi44OC0uNC4xOC0uODIuMzMtMS4yNC40NnYtMi40YzAtMS4yNi0uNDQtMi4yLTEuMy0yLjc4LjU0LS4wNiAxLjAzLS4xMyAxLjUtLjIycy45Mi0uMjMgMS40Mi0uNC45Ni0uNCAxLjM2LS42NC44LS41NiAxLjE2LS45NS42OC0uODQuOTMtMS4zMy40NS0xLjEuNi0xLjc4LjItMS40Ni4yLTIuM2MwLTEuNi0uNS0yLjk4LTEuNTctNC4xMi40OC0xLjI1LjQzLTIuNi0uMTUtNC4wN2wtLjQtLjA1Yy0uMjYtLjAzLS43NS4wOC0xLjQ1LjM0cy0xLjUuNy0yLjM3IDEuMjhjLTEuMjQtLjM0LTIuNTMtLjUtMy44Ni0uNS0xLjM0IDAtMi42Mi4xNi0zLjg0LjUtLjU2LS4zNy0xLjA4LS42OC0xLjU3LS45M3MtLjktLjQyLTEuMi0uNS0uNTYtLjE1LS44Mi0uMTctLjQyLS4wMy0uNS0uMDJMOCA3Ljg1Yy0uNiAxLjQ4LS42NCAyLjg0LS4xNiA0LjA4LTEuMDYgMS4xNC0xLjU4IDIuNS0xLjU4IDQuMTMgMCAuODMuMDcgMS42LjIyIDIuM3MuMzQgMS4yNy42IDEuNzcuNTUuOTQuOTIgMS4zMy43Ni43IDEuMTYuOTUuODUuNDUgMS4zNi42My45OC4zIDEuNDMuNC45Ni4xNyAxLjUuMjNjLS44Ni41OC0xLjI4IDEuNS0xLjI4IDIuNzh2Mi40NGMtLjQ4LS4xNC0uOTQtLjMtMS40LS41LTEuNi0uNjctMy4wNC0xLjY0LTQuMjctMi44OHMtMi4yLTIuNjctMi44OC00LjI3Yy0uNy0xLjY2LTEuMDYtMy40Mi0xLjA2LTUuMjNzLjM2LTMuNTggMS4wNi01LjIzQzQuMyA5LjE3IDUuMjYgNy43MyA2LjUgNi41czIuNjctMi4yIDQuMjctMi44OGMxLjY2LS43IDMuNDItMS4wNiA1LjIzLTEuMDZzMy41OC4zNiA1LjIzIDEuMDZjMS42LjY3IDMuMDQgMS42NCA0LjI3IDIuODhzMi4yIDIuNjcgMi44OCA0LjI3Yy43IDEuNjUgMS4wNiAzLjQgMS4wNiA1LjIzcy0uMzYgMy41Ny0xLjA2IDUuMjNjLS42NyAxLjYtMS42NCAzLjA0LTIuODggNC4yN3onLz48L3N2Zz4=")}</style><ul id="sns"><li><a class="pocket" href="#">pocket</a></li><li><a class="facebook" href="#">facebook</a></li><li><a class="twitter" href="#">twitter</a></li><li><a class="github" href="#">github</a></li><li><a class="googlep" href="#">google+</a></li><li><a class="line" href="#">line</a></li><li><a class="hateb" href="#">hateb</a></li><li><a class="feedly" href="#">feedly</a></li></ul><script>!function(t){if(!("ontouchstart"in window)){var e,a,n=document.getElementById("sns");n.classList.add("dock");var r=n.children,f=r[0].offsetWidth,d=3.14*f;n.style.width=f*(r.length-1)+"px",n.style.height=f+"px",[].forEach.call(r,function(t,e){var n=document.createElement("span"),s=t.getElementsByTagName("a")[0];n.textContent=s.textContent,t.appendChild(n),s.textContent="",t.setAttribute("style","transition:.3s;left:"+e*f+"px")}),n.addEventListener("mousemove",function(t){a=t.clientX-n.getBoundingClientRect().left}),n.addEventListener("mouseenter",function(){e=setInterval(function(){for(var t=a,e=r.length;e--;){var n=r[e];if(-d<(s=e*f+f/2-t)&&s<d){var s=s/f*.5,i=n.getBoundingClientRect().width/n.offsetWidth,l=n.offsetLeft,o=l+(e*f+6*f*Math.sin(s)-l)/5;n.setAttribute("style","left:"+o+"px;transform:scale("+(i+(1+3*Math.cos(s)-i)/5)+")")}else o=-d<s?e*f+2.05*3*f:e*f-2.05*3*f,l=n.offsetLeft,i=n.getBoundingClientRect().width/n.offsetWidth,n.setAttribute("style","left:"+(l+(o-l)/5)+"px;transform:scale("+(i+(1-i)/5)+")")}},20),n.style.height=4*f+"px",n.style.marginTop=-3*f+"px"}),n.addEventListener("mouseleave",function(){clearInterval(e),n.style.height=f+"px",n.style.marginTop=0;for(var t=r.length;t--;)r[t].setAttribute("style","transition: .3s;left:"+t*f+"px")})}}()</script></div><p>クリックしても単なるダミーのURLを貼っているだけなので何も起きません。</p><p>これだけのことを実行するのに、JavaScriptの部分だけなら、Minify + gzipでたったの600バイト程度です。HTMLコードやCSS、8個のSVGアイコンも含めても3,500バイト程度ですよ。</p><p>小さいコードで書くことは、ダウンロード時間を短くするだけじゃなくて、今回のコードのように50/s程度のフレームレートで多数の計算やDOM変更を伴う場合でもスムーズに動く要因ともなります。</p><p>それでは、上記のデモを実現するコードを紹介します。</p><h2>コード（HTML + CSS + JavaScript + アイコンSVG）</h2><pre><code data-lang="html"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span>
<span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"ja"</span>&gt;</span>
<span class="tag">&lt;<span class="name">head</span>&gt;</span>
   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span>
   <span class="tag">&lt;<span class="name">title</span>&gt;</span>Dock<span class="tag">&lt;/<span class="name">title</span>&gt;</span>
   <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css">
   <span class="selector-id">#sns</span> {
      <span class="attribute">position</span>: relative;
      <span class="attribute">margin</span>: <span class="number">0</span> auto;
      <span class="attribute">display</span>: flex;
   }

   <span class="comment">/* for touch devices and javascript off user */</span>
   <span class="selector-id">#sns</span> <span class="selector-tag">li</span> {
      <span class="attribute">flex</span>: <span class="number">1</span> <span class="number">1</span> auto;
      <span class="attribute">list-style</span>: none;
   }
   <span class="selector-id">#sns</span> <span class="selector-tag">a</span> {
      <span class="attribute">display</span>: block;
      <span class="attribute">text-align</span>: center;
   }
   <span class="selector-id">#sns</span> <span class="selector-tag">a</span><span class="selector-pseudo">::before</span> {
      <span class="attribute">display</span>: block;
      <span class="attribute">margin</span>: <span class="number">0</span> auto;
   }

   <span class="selector-class">.dock</span> <span class="selector-tag">li</span> {
      <span class="attribute">display</span>: block;
      <span class="attribute">position</span>: absolute;
      <span class="attribute">bottom</span>: <span class="number">0</span>;
      <span class="attribute">transform-origin</span>: <span class="number">50%</span> <span class="number">100%</span>;
   }
   <span class="selector-class">.dock</span> <span class="selector-tag">li</span><span class="selector-class">.hide</span> {
      <span class="attribute">opacity</span>: <span class="number">0</span>;
   }
   <span class="selector-class">.dock</span> <span class="selector-tag">a</span> {
      <span class="attribute">display</span>: block;
      <span class="attribute">width</span>: <span class="number">30px</span>;
      <span class="attribute">height</span>: <span class="number">30px</span>;
      <span class="attribute">padding</span>: <span class="number">4px</span>;
      <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">1px</span>;
      <span class="attribute">border-radius</span>: <span class="number">4px</span>;
   }
   <span class="selector-class">.dock</span> <span class="selector-tag">span</span> {
      <span class="attribute">display</span>: none;
   }
   <span class="selector-class">.dock</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">span</span> {
      <span class="attribute">position</span>: absolute;
      <span class="attribute">display</span>: block;
      <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">3px</span>;
      <span class="attribute">bottom</span>: <span class="number">100%</span>;
      <span class="attribute">left</span>: <span class="number">50%</span>;
      <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">50%</span>);
      <span class="attribute">white-space</span>: nowrap;
      <span class="attribute">text-align</span>: center;
      <span class="attribute">font-size</span>: <span class="number">10px</span>;
      <span class="attribute">border-radius</span>: <span class="number">1em</span>;
      <span class="attribute">padding</span>: .<span class="number">1em</span> <span class="number">1em</span>;
      <span class="attribute">color</span>: <span class="number">#fff</span>;
      <span class="attribute">background</span>: <span class="number">#666</span>;
   }
   <span class="selector-class">.dock</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">span</span><span class="selector-pseudo">::before</span> {
      <span class="attribute">content</span>:<span class="string">''</span>;
      <span class="attribute">position</span>:absolute;
      <span class="attribute">display</span>:block;
      <span class="attribute">width</span>:<span class="number">0</span>;
      <span class="attribute">bottom</span>:-<span class="number">3px</span>;
      <span class="attribute">left</span>:<span class="number">50%</span>;
      <span class="attribute">margin-left</span>: -<span class="number">4px</span>;
      <span class="attribute">border-style</span>:solid;
      <span class="attribute">border-color</span>:<span class="number">#666</span> transparent;
      <span class="attribute">border-width</span>: <span class="number">4px</span> <span class="number">4px</span> <span class="number">0</span>;
   }

   <span class="selector-class">.facebook</span> {
      <span class="attribute">background</span>: <span class="number">#315096</span>;
   }
   <span class="selector-class">.facebook</span><span class="selector-pseudo">::before</span> {
      <span class="attribute">content</span>: <span class="built_in">url</span>(<span class="string">"data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00xOCAzMmgtNlYxNkg4di01LjVsNC0uMDJWNy4yNEMxMiAyLjc0IDEzLjIgMCAxOC41IDBoNC40MnY1LjVoLTIuNzVDMTguMSA1LjUgMTggNi4zIDE4IDcuNzN2Mi43Nmg0Ljk1TDIyLjM4IDE2SDE4djE2eicvPjwvc3ZnPg=="</span>);
   }
   <span class="selector-class">.twitter</span> {
      <span class="attribute">background</span>: <span class="number">#55acee</span>;
   }
   <span class="selector-class">.twitter</span><span class="selector-pseudo">::before</span> {
      <span class="attribute">content</span>: <span class="built_in">url</span>(<span class="string">"data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00zMiA2LjA4Yy0xLjE4LjUyLTIuNDQuODctMy43NyAxLjAzIDEuMzUtLjggMi40LTIuMSAyLjktMy42Mi0xLjI4Ljc1LTIuNyAxLjMtNC4xOCAxLjYtMS4yLTEuMy0yLjktMi4wOC00LjgtMi4wOC0zLjYyIDAtNi41NiAyLjk0LTYuNTYgNi41NiAwIC41Mi4wNSAxLjAyLjE2IDEuNS01LjQ2LS4yNy0xMC4zLTIuOS0xMy41My02Ljg2LS41Ny45Ny0uOSAyLjEtLjkgMy4zIDAgMi4yOCAxLjE3IDQuMyAyLjkzIDUuNDctMS4wOC0uMDQtMi4xLS4zMy0yLjk3LS44My0uMDIuMDMtLjAyLjA2LS4wMi4xIDAgMy4xNyAyLjI3IDUuODIgNS4yNyA2LjQyLS41NS4xNS0xLjEzLjIzLTEuNzMuMjMtLjQyIDAtLjgzLS4wNS0xLjIzLS4xMi44MiAyLjYgMy4yNSA0LjUgNi4xMiA0LjU2LTIuMjUgMS43Ni01LjA4IDIuOC04LjE2IDIuOC0uNTMgMC0xLjA1LS4wMy0xLjU2LS4xQzIuOSAyNy45MyA2LjM1IDI5IDEwLjA2IDI5YzEyLjA4IDAgMTguNjgtMTAgMTguNjgtMTguNjggMC0uMjggMC0uNTYtLjAyLS44NSAxLjMtLjkyIDIuNC0yLjA4IDMuMjgtMy40eicvPjwvc3ZnPg=="</span>);
   }
   <span class="selector-class">.hateb</span> {
      <span class="attribute">background</span>: <span class="number">#008fde</span>;
   }
   <span class="selector-class">.hateb</span><span class="selector-pseudo">::before</span> {
      <span class="attribute">content</span>: <span class="built_in">url</span>(<span class="string">"data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAzMiAzMic+PHBhdGggZmlsbD0nI2ZmZicgZD0nTTIzLjg3IDI0LjM1YzAgMS43NCAxLjQgMy4xNSAzLjE1IDMuMTVzMy4xNi0xLjQgMy4xNi0zLjE1YzAtMS43NC0xLjQyLTMuMTYtMy4xNi0zLjE2cy0zLjE1IDEuNC0zLjE1IDMuMTV6bS4yOC0yMC42Mmg1Ljc1djE1LjdoLTUuNzV6TTE1LjQgMTQuM3MzLjk4LS4yNiAzLjk4LTUuMDJjMC01LjUtNC45OC01LjU0LTcuODItNS41NEgxLjgydjIzLjc4aDkuNjVjNy44NiAwIDkuMi00LjMgOS4yLTcuMDVzLTEuMzQtNS4zNC01LjI2LTYuMTh6TTcuODggOC4yaDIuNjdjLjUgMCAyLjY3LjIgMi42NyAyLjI4IDAgMi40NC0xLjg4IDIuMzYtMy4xMyAyLjM2SDcuODdWOC4yMnpNMTEgMjIuNDZINy45di01LjIyaDMuMnMzLjIuMzggMy4yIDIuNi0xLjggMi42Mi0zLjI3IDIuNjJ6Jy8+PC9zdmc+"</span>);
   }
   <span class="selector-class">.pocket</span> {
      <span class="attribute">background</span>: <span class="number">#ee4056</span>;
   }
   <span class="selector-class">.pocket</span><span class="selector-pseudo">::before</span> {
      <span class="attribute">content</span>: <span class="built_in">url</span>(<span class="string">"data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00yNy41IDMuMTdINC4zM2MtMS41OCAwLTIuODYgMS4yNy0yLjg2IDIuODV2OC40NWMwIDcuOTggNi40NyAxNC40NSAxNC40NSAxNC40NSA3LjkgMCAxNC4zMi02LjM0IDE0LjQ2LTE0LjJ2LTguN2MwLTEuNTgtMS4yNy0yLjg1LTIuODUtMi44NXpNMjQgMTRsLTYuNDcgNi40N2MtLjQyLjQ0LTEuMDIuNjItMS42LjU1LS41Ni4wNy0xLjE1LS4xLTEuNi0uNTVMNy44NSAxNGMtLjc1LS43NS0uNzUtMS45OCAwLTIuNzRzMS45OC0uNzUgMi43NCAwbDUuMzMgNS4zNCA1LjM1LTUuMzRjLjc1LS43NSAxLjk4LS43NSAyLjczIDBzLjc2IDIgMCAyLjc0eicvPjwvc3ZnPg=="</span>);
   }
   <span class="selector-class">.feedly</span> {
      <span class="attribute">background</span>: <span class="number">#6cc655</span>;
   }
   <span class="selector-class">.feedly</span><span class="selector-pseudo">::before</span> {
      <span class="attribute">content</span>: <span class="built_in">url</span>(<span class="string">"data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00zMC41NiAxNi42N2wtMTMuMy0xMy4zYy0uNy0uNy0xLjgyLS43LTIuNTIgMGwtMTMuMyAxMy4zYy0uNy43LS43IDEuODIgMCAyLjUybDkuOTYgOS45NWg5LjJsOS45Ni05Ljk2Yy43LS43LjctMS44MyAwLTIuNTN6bS0yMi4xMyAyLjhsLTEuNDgtMS41Yy0uMS0uMS0uMS0uMjYgMC0uMzdsOC43OC04Ljc4Yy4xLS4xLjI3LS4xLjM3IDBsMS45OCAxLjk4Yy4xLjEuMS4yNyAwIC4zN2wtOC4zIDguM0g4LjQ0em05LjczIDUuNWwtMS40OCAxLjQ3aC0xLjM2bC0xLjQ4LTEuNDhjLS4xLS4xLS4xLS4yNyAwLS4zN2wxLjk3LTJjLjEyLS4xLjI4LS4xLjQgMGwxLjk2IDJjLjEuMS4xLjI2IDAgLjM2ek0xOC4yIDE4bC00Ljk0IDQuOTJIMTEuOWwtMS41LTEuNDhjLS4xLS4xLS4xLS4yNyAwLS4zN2w1LjQ0LTUuNDJjLjEtLjEuMjctLjEuMzcgMGwyIDEuOThjLjEuMS4xLjI3IDAgLjM3eicvPjwvc3ZnPg=="</span>);
   }
   <span class="selector-class">.googlep</span> {
      <span class="attribute">background</span>: <span class="number">#dd4b39</span>;
   }
   <span class="selector-class">.googlep</span><span class="selector-pseudo">::before</span> {
      <span class="attribute">content</span>: <span class="built_in">url</span>(<span class="string">"data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00xNy40NyAySDkuMUM1LjM0IDIgMS44IDQuODQgMS44IDguMTRjMCAzLjM2IDIuNTcgNi4wOCA2LjQgNi4wOC4yNiAwIC41IDAgLjc3LS4wMi0uMjUuNDctLjQzIDEtLjQzIDEuNTYgMCAuOTQuNSAxLjcgMS4xNCAyLjMtLjQ4IDAtLjk0LjAzLTEuNDUuMDNDMy41OCAxOC4xIDAgMjEuMDQgMCAyNC4xYzAgMy4wMiAzLjkyIDQuOTIgOC41NyA0LjkyIDUuMyAwIDguMjMtMyA4LjIzLTYuMDQgMC0yLjQyLS43LTMuODctMi45My01LjQ0LS43NS0uNTMtMi4yLTEuODQtMi4yLTIuNiAwLS45LjI2LTEuMzQgMS42LTIuNCAxLjQtMS4wOCAyLjM3LTIuNiAyLjM3LTQuMzcgMC0yLjEtLjk0LTQuMTctMi43LTQuODVoMi42NkwxNy40NyAyem0tMi45MiAyMC40OGMuMDYuMjguMS41Ny4xLjg3IDAgMi40NC0xLjU4IDQuMzUtNi4xIDQuMzUtMy4yIDAtNS41My0yLjA0LTUuNTMtNC40OCAwLTIuNCAyLjg4LTQuNCA2LjEtNC4zNS43NCAwIDEuNDQuMTMgMi4wOC4zMyAxLjc0IDEuMiAzIDEuOSAzLjM1IDMuMjh6bS01LjE1LTkuMWMtMi4xNi0uMDgtNC4yLTIuNDMtNC41OC01LjI2czEuMDctNSAzLjIzLTQuOTNjMi4xNi4wNSA0LjIgMi4zMiA0LjU4IDUuMTZzLTEuMDcgNS4wNy0zLjIzIDV6TTI2IDhWMmgtMnY2aC02djJoNnY2aDJ2LTZoNlY4eicvPjwvc3ZnPg=="</span>);
   }
   <span class="selector-class">.line</span> {
      <span class="attribute">background</span>: <span class="number">#00c300</span>;
   }
   <span class="selector-class">.line</span><span class="selector-pseudo">::before</span> {
      <span class="attribute">content</span>: <span class="built_in">url</span>(<span class="string">"data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00xNS45MyAxLjk1Yy03Ljk2IDAtMTQuNCA1LjI4LTE0LjQgMTEuOCAwIDUuODQgNS4yIDEwLjcgMTIuMDIgMTEuNjNoLjA4bC4yMy4wNGMuNzUuMSAxLjEuMjggMS4xIDEuMS0uMDIuOTItLjM4IDEuNi0uNiAyLjA0cy0uNjcgMi4yNSAxLjQgMS4xM2MxLjU4LS44OCA5LjM3LTQuNyAxMi44Ny0xMC4zNy45My0xLjQgMS41LTMgMS42Ny00LjY4di0uMTVsLjAzLS4yNXYtLjVjMC02LjUyLTYuNDQtMTEuOC0xNC40LTExLjh6TTkuOSAxNy4xNUg3LjEzYy0uNCAwLS43My0uMzMtLjczLS43M3YtNS41N2MwLS40LjMzLS43NC43NC0uNzRzLjczLjM0LjczLjc1djQuODNoMmMuNDIgMCAuNzUuMzMuNzUuNzNzLS4zMy43NS0uNzQuNzV6bTMuMTItLjczYzAgLjQtLjMzLjczLS43NC43M3MtLjczLS4zMy0uNzMtLjczdi01LjU3YzAtLjQuMzMtLjc0LjczLS43NHMuNzQuMzQuNzQuNzV2NS41NnptNi43LjVjMCAuMDItLjAyLjAzLS4wMy4wNGwtLjEuMDZjMCAuMDItLjAzLjAzLS4wNi4wNGwtLjA2LjAzYy0uMDIgMC0uMDUgMC0uMDguMDJoLS4wNWwtLjE1LjAzYy0uMDUgMC0uMSAwLS4xNC0uMDItLjAyIDAtLjA1IDAtLjA3LS4wMnMtLjA2IDAtLjA4IDBsLS4wNy0uMDVjLS4wMiAwLS4wNCAwLS4wNS0uMDItLjEtLjA3LS4xNy0uMTUtLjIzLS4yNEwxNS43MiAxM3YzLjRjMCAuNC0uMzMuNzMtLjczLjczcy0uNzQtLjMzLS43NC0uNzR2LTUuNTUtLjA0LS4xYy4wMi0uMDIuMDMtLjA1LjAzLS4wN3YtLjA2bC4wNi0uMXMwLS4wMi4wMi0uMDNjLjA1LS4wOC4xMi0uMTUuMi0uMi4wMiAwIC4wMy0uMDIuMDUtLjAzbC4wOC0uMDMuMDgtLjAyLjA3LS4wMi4xMy0uMDJIMTVjLjA1IDAgLjEuMDIuMTQuMDMuMDIgMCAuMDQgMCAuMDYuMDIuMDIgMCAuMDUgMCAuMDcuMDIuMDMgMCAuMDUuMDIuMDcuMDRsLjA2LjA0Yy4wNC4wMi4wOC4wNS4xLjEuMDUuMDMuMS4wOC4xMi4xM2wyLjg1IDMuNzd2LTMuNGMwLS40LjMzLS43My43My0uNzNzLjc0LjM0Ljc0Ljc1djUuNTZjMCAuMDYgMCAuMS0uMDIuMTZ2LjA1bC0uMDQuMWMwIC4wMi0uMDIuMDMtLjAzLjA1IDAgLjAzLS4wMi4wNS0uMDQuMDcgMCAuMDMtLjAzLjA2LS4wNS4wOGwtLjAzLjAzem00LjgyLTQuMDJjLjQgMCAuNzMuMzMuNzMuNzNzLS4zMy43My0uNzMuNzNoLTJ2MS4zMmgyYy40IDAgLjczLjMzLjczLjczcy0uMzMuNzUtLjczLjc1SDIxLjhjLS40MiAwLS43NC0uMzMtLjc0LS43NHYtNS41NWMwLS40LjMzLS43NC43My0uNzRoMi43NGMuNCAwIC43My4zNC43My43NXMtLjMzLjczLS43My43M2gtMnYxLjNoMnonLz48L3N2Zz4="</span>);
   }
   <span class="selector-class">.github</span> {
      <span class="attribute">background</span>: <span class="number">#333</span>;
   }
   <span class="selector-class">.github</span><span class="selector-pseudo">::before</span> {
      <span class="attribute">content</span>: <span class="built_in">url</span>(<span class="string">"data:image/svg+xml; base64, PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnICB2aWV3Qm94PScwIDAgMzIgMzInPjxwYXRoIGZpbGw9JyNmZmYnIGQ9J00xNiAwQzcuMTYgMCAwIDcuMTYgMCAxNnM3LjE2IDE2IDE2IDE2IDE2LTcuMTYgMTYtMTZTMjQuODQgMCAxNiAwem05LjUgMjUuNWMtMS4yMyAxLjI0LTIuNjcgMi4yLTQuMjcgMi44OC0uNC4xOC0uODIuMzMtMS4yNC40NnYtMi40YzAtMS4yNi0uNDQtMi4yLTEuMy0yLjc4LjU0LS4wNiAxLjAzLS4xMyAxLjUtLjIycy45Mi0uMjMgMS40Mi0uNC45Ni0uNCAxLjM2LS42NC44LS41NiAxLjE2LS45NS42OC0uODQuOTMtMS4zMy40NS0xLjEuNi0xLjc4LjItMS40Ni4yLTIuM2MwLTEuNi0uNS0yLjk4LTEuNTctNC4xMi40OC0xLjI1LjQzLTIuNi0uMTUtNC4wN2wtLjQtLjA1Yy0uMjYtLjAzLS43NS4wOC0xLjQ1LjM0cy0xLjUuNy0yLjM3IDEuMjhjLTEuMjQtLjM0LTIuNTMtLjUtMy44Ni0uNS0xLjM0IDAtMi42Mi4xNi0zLjg0LjUtLjU2LS4zNy0xLjA4LS42OC0xLjU3LS45M3MtLjktLjQyLTEuMi0uNS0uNTYtLjE1LS44Mi0uMTctLjQyLS4wMy0uNS0uMDJMOCA3Ljg1Yy0uNiAxLjQ4LS42NCAyLjg0LS4xNiA0LjA4LTEuMDYgMS4xNC0xLjU4IDIuNS0xLjU4IDQuMTMgMCAuODMuMDcgMS42LjIyIDIuM3MuMzQgMS4yNy42IDEuNzcuNTUuOTQuOTIgMS4zMy43Ni43IDEuMTYuOTUuODUuNDUgMS4zNi42My45OC4zIDEuNDMuNC45Ni4xNyAxLjUuMjNjLS44Ni41OC0xLjI4IDEuNS0xLjI4IDIuNzh2Mi40NGMtLjQ4LS4xNC0uOTQtLjMtMS40LS41LTEuNi0uNjctMy4wNC0xLjY0LTQuMjctMi44OHMtMi4yLTIuNjctMi44OC00LjI3Yy0uNy0xLjY2LTEuMDYtMy40Mi0xLjA2LTUuMjNzLjM2LTMuNTggMS4wNi01LjIzQzQuMyA5LjE3IDUuMjYgNy43MyA2LjUgNi41czIuNjctMi4yIDQuMjctMi44OGMxLjY2LS43IDMuNDItMS4wNiA1LjIzLTEuMDZzMy41OC4zNiA1LjIzIDEuMDZjMS42LjY3IDMuMDQgMS42NCA0LjI3IDIuODhzMi4yIDIuNjcgMi44OCA0LjI3Yy43IDEuNjUgMS4wNiAzLjQgMS4wNiA1LjIzcy0uMzYgMy41Ny0xLjA2IDUuMjNjLS42NyAxLjYtMS42NCAzLjA0LTIuODggNC4yN3onLz48L3N2Zz4="</span>);
   }
   </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span>
<span class="tag">&lt;/<span class="name">head</span>&gt;</span>

<span class="tag">&lt;<span class="name">body</span>&gt;</span>
   <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"dummy"</span> <span class="attr">style</span>=<span class="string">"height:300px;"</span>&gt;</span>DUMMY for space<span class="tag">&lt;/<span class="name">p</span>&gt;</span>
   <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"sns"</span>&gt;</span>
      <span class="tag">&lt;<span class="name">li</span>&gt;</span>
         <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"pocket"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>pocket<span class="tag">&lt;/<span class="name">a</span>&gt;</span>
      <span class="tag">&lt;/<span class="name">li</span>&gt;</span>
      <span class="tag">&lt;<span class="name">li</span>&gt;</span>
         <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"facebook"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>facebook<span class="tag">&lt;/<span class="name">a</span>&gt;</span>
      <span class="tag">&lt;/<span class="name">li</span>&gt;</span>
      <span class="tag">&lt;<span class="name">li</span>&gt;</span>
         <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"twitter"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>twitter<span class="tag">&lt;/<span class="name">a</span>&gt;</span>
      <span class="tag">&lt;/<span class="name">li</span>&gt;</span>
      <span class="tag">&lt;<span class="name">li</span>&gt;</span>
         <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"github"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>github<span class="tag">&lt;/<span class="name">a</span>&gt;</span>
      <span class="tag">&lt;/<span class="name">li</span>&gt;</span>
      <span class="tag">&lt;<span class="name">li</span>&gt;</span>
         <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"googlep"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>google+<span class="tag">&lt;/<span class="name">a</span>&gt;</span>
      <span class="tag">&lt;/<span class="name">li</span>&gt;</span>
      <span class="tag">&lt;<span class="name">li</span>&gt;</span>
         <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"line"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>line<span class="tag">&lt;/<span class="name">a</span>&gt;</span>
      <span class="tag">&lt;/<span class="name">li</span>&gt;</span>
      <span class="tag">&lt;<span class="name">li</span>&gt;</span>
         <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"hateb"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>hateb<span class="tag">&lt;/<span class="name">a</span>&gt;</span>
      <span class="tag">&lt;/<span class="name">li</span>&gt;</span>
      <span class="tag">&lt;<span class="name">li</span>&gt;</span>
         <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"feedly"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>feedly<span class="tag">&lt;/<span class="name">a</span>&gt;</span>
      <span class="tag">&lt;/<span class="name">li</span>&gt;</span>
   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>
   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">

   <span class="comment">// マウスホバーした時の拡大率</span>
   <span class="keyword">var</span> zoom = <span class="number">4</span>;

   (<span class="function"><span class="keyword">function</span>(<span class="params">zoom</span>) </span>{
      <span class="string">'use strict'</span>

      <span class="comment">//</span>
      <span class="keyword">if</span>(<span class="string">'ontouchstart'</span> <span class="keyword">in</span> <span class="built_in">window</span>) <span class="keyword">return</span>;
      <span class="keyword">var</span> anime;
      <span class="keyword">var</span> mouseX;

      <span class="keyword">var</span> dock = <span class="built_in">document</span>.getElementById(<span class="string">'sns'</span>);
      dock.classList.add(<span class="string">'dock'</span>);
      <span class="keyword">var</span> icons = dock.children;
      <span class="keyword">var</span> defaultWidth = icons[<span class="number">0</span>].offsetWidth;
      <span class="keyword">var</span> bound = defaultWidth * <span class="number">3.14</span>;
      dock.style.width = defaultWidth * (icons.length <span class="number">-1</span>) +<span class="string">'px'</span>;
      dock.style.height = defaultWidth +<span class="string">'px'</span>;
      [].forEach.call(icons, <span class="function"><span class="keyword">function</span>(<span class="params">icon, i</span>) </span>{
         <span class="keyword">var</span> span = <span class="built_in">document</span>.createElement(<span class="string">'span'</span>);
         <span class="keyword">var</span> anchor = icon.getElementsByTagName(<span class="string">'a'</span>)[<span class="number">0</span>];
         <span class="keyword">var</span> text = anchor.textContent;
         span.textContent = text;
         icon.appendChild(span);
         anchor.textContent = <span class="string">''</span>;

         <span class="comment">// icon.style.transition = ...でもOK</span>
         icon.setAttribute(<span class="string">'style'</span>, <span class="string">'transition:.3s;left:'</span> + i * defaultWidth + <span class="string">'px'</span>);
      });

      <span class="comment">// 50/sのフレームレートで実行される、各アイコンの位置や大きさを決めている関数</span>
      <span class="function"><span class="keyword">function</span> <span class="title">scaling</span>(<span class="params">x</span>) </span>{
         <span class="keyword">for</span>(<span class="keyword">var</span> i = icons.length; i--;) {
            <span class="keyword">var</span> icon = icons[i];
            <span class="keyword">var</span> distance = (i * defaultWidth + defaultWidth / <span class="number">2</span>) - x;
            <span class="keyword">if</span>(-bound &lt; distance &amp;&amp; distance &lt; bound) {
               <span class="keyword">var</span> rad = distance / defaultWidth * <span class="number">.5</span>;
               <span class="keyword">var</span> currentScale = icon.getBoundingClientRect().width / icon.offsetWidth;
               <span class="keyword">var</span> scale = currentScale + (<span class="number">1</span> + (zoom - <span class="number">1</span>) * <span class="built_in">Math</span>.cos(rad) - currentScale)/<span class="number">5</span>;
               <span class="keyword">var</span> currentLeft = icon.offsetLeft;
               <span class="keyword">var</span> left = currentLeft + (i * defaultWidth + <span class="number">2</span> * (zoom - <span class="number">1</span>) * defaultWidth * <span class="built_in">Math</span>.sin(rad) -currentLeft)/<span class="number">5</span>;
               <span class="comment">// icon.style.left .., icon.style.transform = ..じゃないのは、速度を</span>
               <span class="comment">// 優先したため</span>
               icon.setAttribute(<span class="string">'style'</span>, <span class="string">'left:'</span> + left + <span class="string">'px;transform:scale('</span> + scale + <span class="string">')'</span>);
            } <span class="keyword">else</span> {
               <span class="keyword">var</span> left;
               <span class="keyword">if</span>(-bound &lt; distance) {
                  left = i * defaultWidth + <span class="number">2.05</span> * (zoom - <span class="number">1</span>) * defaultWidth;
               } <span class="keyword">else</span> {
                  left = i * defaultWidth - <span class="number">2.05</span> * (zoom - <span class="number">1</span>) * defaultWidth;
               }
               <span class="keyword">var</span> currentLeft = icon.offsetLeft;
               <span class="keyword">var</span> currentScale = icon.getBoundingClientRect().width / icon.offsetWidth;
               icon.setAttribute(<span class="string">'style'</span>, <span class="string">'left:'</span> + (currentLeft + (left - currentLeft)/<span class="number">5</span>) + <span class="string">'px;transform:scale('</span>+(currentScale + (<span class="number">1</span>-currentScale)/<span class="number">5</span>)+<span class="string">')'</span>);
            }
         }
      }

      dock.addEventListener(<span class="string">'mousemove'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>{
         mouseX = e.clientX - dock.getBoundingClientRect().left;
      });

      <span class="comment">// dockの上にマウスが入ったときに各アイコンの拡大処理をスタート</span>
      dock.addEventListener(<span class="string">'mouseenter'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>{
         <span class="comment">// フレームレート 50/s で各アイコンを拡大/縮小する</span>
         anime = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{
            scaling(mouseX);
         }, <span class="number">20</span>);

         <span class="comment">// dock自体も拡大しないと、iconの隙間にマウスが入ったときに</span>
         <span class="comment">// 不意に縮小する</span>
         dock.style.height = defaultWidth * zoom + <span class="string">'px'</span>;
         dock.style.marginTop = -(zoom - <span class="number">1</span>) * defaultWidth + <span class="string">'px'</span>;
      });

      <span class="comment">// マウスがdockから離れたとき</span>
      dock.addEventListener(<span class="string">'mouseleave'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>{
         clearInterval(anime);
         dock.style.height = defaultWidth + <span class="string">'px'</span>;
         dock.style.marginTop = <span class="number">0</span>;

         <span class="comment">// 通常の状態に戻る縮小処理はJavaScriptじゃなくてcssのtransitionでやってる</span>
         <span class="comment">// jsでやると、全ての処理が終了するまでanime処理を終わらせられなくて、その間に</span>
         <span class="comment">// またmouseenterになったときの処理が面倒</span>
         <span class="keyword">for</span>(<span class="keyword">var</span> i = icons.length; i--;) {
            <span class="comment">// tansform:scaleは書かなくても、setAttributeでやっていると</span>
            <span class="comment">// transform属性自体削除されているのでscale(1)扱いになる</span>
            icons[i].setAttribute(<span class="string">'style'</span>, <span class="string">'transition: .3s;left:'</span> + i * defaultWidth + <span class="string">'px'</span>);
         }
      });
   }(zoom));
   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
<span class="tag">&lt;/<span class="name">body</span>&gt;</span>
<span class="tag">&lt;/<span class="name">html</span>&gt;</span>
</code></pre><p>このコードをコピーしてHTMLファイルを作れば、簡単に同じものが再現できますので、ぜひやってみてください。</p><tag-button>JavaScript</tag-button><tag-button>SVG</tag-button><tag-button>CSS3</tag-button><tag-button>HTML5</tag-button></article><nav></nav></div><footer><p>Copyright © 2007-2020 <a href="//egashira.jp/">egashira.jp</a> All rights reserved.</p></footer><script src="/base.js" async></script>