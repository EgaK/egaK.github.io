<!DOCTYPE html><meta charset="utf-8"><title>localhostでSSLが必須の機能を使用する | egashira.jp</title><meta name="description" content="Webアプリの開発中にlocalhostなどのSSLが使用できない環境で、SSLを必要とする機能を使用する方法を紹介します。"><meta property="og:title" content="localhostでSSLが必須の機能を使用する | egashira.jp"><meta property="og:description" content="Webアプリの開発中にlocalhostなどのSSLが使用できない環境で、SSLを必要とする機能を使用する方法を紹介します。"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><link rel="stylesheet" href="/style.css"><link rel="alternate" type="application/atom+xml" href="https://egashira.jp/atom.xml" title="Atom"><div id="wrap"><header><a href="/"><svg width="240" height="50" viewBox="0 0 480 100"><path fill="none" stroke="#fff" stroke-width="9" stroke-linecap="square" stroke-linejoin="bevel" d="M237 61v1h26V49h-26V36h26v1M437 76V36h26v26h-26M367 36h26v26h-26V48h26M423 24v1M117 49h26V36h-26v26h26M183 62h-26V36h26v39h-21M197 36h26v26h-26V48h26M278 24v38M287 36h18v26M319 24v1M319 36v26M334 62V36h19M409 61v1M423 36v38h-15"/><path fill="#fff" d="M5.4 38.2c-1.8 2-2.4 5-2.5 8L0 85c-.2 7 8 15 15 15l39-2.8c2.8 0 5.8-.5 7.7-2.4l36.5-36.6c3-3 2.2-8.5-1.7-12.4L54.2 3.5c-4-4-9.4-4.7-12.4-1.7L5.4 38.2zm46.8 48.5l-20.2 1L12.4 68l1-20L40 21c1.5-1.4 4.2-1 6.2 1 2 1.8 2.3 4.6 1 6L22.4 53c-2 1.8-1.4 5.2 1 7.7 2.5 2.4 6 3 7.8 1L56 37c1.3-1.4 4-1 6 1s2.4 4.7 1 6L38.2 69c-1.8 1.8-1.3 5.3 1 7.7 2.5 2.4 6 3 7.8 1L71.8 53c1.5-1.5 4.3-1 6.2.8 2 2 2.3 4.7.8 6.2L52.2 86.6z"/></svg></a></header><article><h1>localhostでSSLが必須の機能を使用する</h1><p class="updated">2020-02-12</p><p class="abst">Webアプリの開発中にlocalhostなどのSSLが使用できない環境で、SSLを必要とする機能を使用する方法を紹介します。</p><p>地図を使用したWebアプリでは、現在地の取得するためのnavigator.geolocation.getCurrentPosition関数などを使用します。しかし、最近のChromeをはじめとしたブラウザでは、セキュリティの観点からSSLに対応していないサイト上ではこれらの機能が働かないようになっていて、デベロッパーツールで見ると、下記のようなメッセージが表示されます。</p><p></p><p>[Deprecation] getCurrentPosition() and watchPosition() no longer work on insecure origins. To use this feature, you should consider switching your application to a secure origin, such as HTTPS. See https://goo.gl/rStTGz for more details.</p><p>この警告を無視して、localhostのようなSSLが入れられないサイトでSSL必須の機能を使用するには、Chromeのアドレス欄に以下のアドレスを入力します。</p><pre><code data-lang="bash">chrome://flags/<span class="comment">#unsafely-treat-insecure-origin-as-secure</span></code></pre><img class="photo" src="/images/chromeinsecure.png" width="500" height="397"><p>そのあと、右側の「Disabled」のボタンから「Enabled」に変更して有効化し、このページの下にある「Relaunch」ボタンを推して再起動すると、設定した機能が有効になります。</p><p>以前は以下の方法でいけてたんですが、最近実行しようとしたら、うまく行きませんでした。<br>以下のようにターミナルからオプションを指定して起動します</p><pre><code data-lang="bash">open -a <span class="string">"/Applications/Google Chrome.app"</span> --args  --unsafely-treat-insecure-origin-as-secure=<span class="string">"http://localhost/"</span> http://localhost/</code></pre><p>上記はMacの起動コマンドですが、Windowsその他も同様の方法でいけるはずです。</p></article><nav></nav></div><footer><p>Copyright © 2007-2020 <a href="//egashira.jp/">egashira.jp</a> All rights reserved.</p></footer><script src="/base.js" async></script>